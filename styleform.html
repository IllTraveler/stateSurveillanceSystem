<!DOCTYPE html> 
<html> 
<head>
    <title>Report Of Ill Traveler</title>
    <style type="text/css">
        .form-style-1 {
            margin:10px auto;
            max-width: 400px;
            padding: 20px 12px 10px 20px;
            font: 13px "Lucida Sans Unicode", "Lucida Grande", sans-serif;
        }
        .form-style-1 li {
            padding: 0;
            display: block;
            list-style: none;
            margin: 10px 0 0 0;
        }
        .form-style-1 label{
            margin:0 0 3px 0;
            padding:0px;
            display:block;
            font-weight: bold;
        }
        .form-style-1 input[type=text], 
        .form-style-1 input[type=date],
        .form-style-1 input[type=datetime],
        .form-style-1 input[type=number],
        .form-style-1 input[type=search],
        .form-style-1 input[type=time],
        .form-style-1 input[type=url],
        .form-style-1 input[type=email],
        textarea, 
        select{
            box-sizing: border-box;
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            border:1px solid #BEBEBE;
            padding: 7px;
            margin:0px;
            -webkit-transition: all 0.30s ease-in-out;
            -moz-transition: all 0.30s ease-in-out;
            -ms-transition: all 0.30s ease-in-out;
            -o-transition: all 0.30s ease-in-out;
            outline: none;	
        }
        .form-style-1 input[type=text]:focus, 
        .form-style-1 input[type=date]:focus,
        .form-style-1 input[type=datetime]:focus,
        .form-style-1 input[type=number]:focus,
        .form-style-1 input[type=search]:focus,
        .form-style-1 input[type=time]:focus,
        .form-style-1 input[type=url]:focus,
        .form-style-1 input[type=email]:focus,
        .form-style-1 textarea:focus, 
        .form-style-1 select:focus{
            -moz-box-shadow: 0 0 8px #88D5E9;
            -webkit-box-shadow: 0 0 8px #88D5E9;
            box-shadow: 0 0 8px #88D5E9;
            border: 1px solid #88D5E9;
        }
        .form-style-1 .field-divided{
            width: 49%;
        }
        
        .form-style-1 .field-long{
            width: 100%;
        }
        .form-style-1 .field-select{
            width: 100%;
        }
        .form-style-1 .field-textarea{
            height: 100px;
        }
        .form-style-1 input[type=submit], .form-style-1 input[type=button]{
            background: #4B99AD;
            padding: 8px 15px 8px 15px;
            border: none;
            color: #fff;
        }
        .form-style-1 input[type=submit]:hover, .form-style-1 input[type=button]:hover{
            background: #4691A4;
            box-shadow:none;
            -moz-box-shadow:none;
            -webkit-box-shadow:none;
        }
        .form-style-1 .required{
            color:red;
        }
        </style>
   <script>
    function outputTravelerJson() {
     var departure = document.getElementById('departure').value;
     var departureText = document.getElementById('departure').textContent;
         var arrival = document.getElementById('arrival').value;
         var arrivalText = document.getElementById('arrival').textContent;
         var flightHours = document.getElementById('flightHours').value;
         var seatNumber = document.getElementById('seatNumber').value;
         var flightDate = document.getElementById('flightDate').value;
         var sitInSeat = document.getElementById('sitInSeat').value;
         var flightNumber = document.getElementById('flightNumber').value;
         var data = {
             "resourceType" : "Composition",
             "id" : "ReportOfIllTravelerExample",
             "meta" : {
                 "profile" : [
                     "http://hl7.org/fhir/us/reportofilltraveler/StructureDefinition/ReportOfIllTravelerSimple"
                     ]
               },
               "extension" : [
                 {
                 "extension" : [
                     {
                     "url" : "departureAirport",
                     "valueCodeableConcept" : {
                         "coding" : [
                         {
                             "code" : departure,
                             "display" : departureText
                         }
                         ]
                     }
                     },
                     {
                     "url" : "arrivalAirport",
                     "valueCodeableConcept" : {
                         "coding" : [
                         {
                             "code" : arrival,
                             "display" : arrivalText
                         }
                         ]
                     }
                     },
                     {
                     "url" : "flightNumber",
                     "valueString" : flightNumber
                     },
                     {
                     "url" : "seatNumber",
                     "valueString" : seatNumber
                     },
                     {
                     "url" : "flightDuration",
                     "valueInteger" : flightHours
                     },
                     {
                     "url" : "airline",
                     "valueString" : "United"
                     }
                 ],
                 "url" : "http://hl7.org/fhir/us/reportofilltraveler/StructureDefinition/flight-details"
                 },
                 {
                 "url" : "http://hl7.org/fhir/us/reportofilltraveler/StructureDefinition/disease-name",
                 "valueCodeableConcept" : {
                     "coding" : [
                     {
                         "code" : "TB",
                         "display" : "Tuberculosis"
                     }
                     ]
                 }
                 }
             ],
             "status" : "final",
             "type" : {
                 "coding" : [
                 {
                     "code" : "55751-2",
                     "display" : "Public health Case report"
                 }
                 ]
             },
             "subject" : {
             "reference" : "Patient/travelerExample"
             },
             "date" : "2023-12-03T19:43:30.000Z",
             "author" : [
                 {
                 "reference" : "Organization/StateExample"
                 }
             ],
             "title" : "Report of Ill Traveler"

         };
         document.getElementById('Reportoutput').innerHTML = JSON.stringify(data, null, 2);
         document.getElementById('nextStep').innerHTML = "Report of Ill Traveler successfully created. Please contact CDC if you do not receive a response. ";
            sendToCDC();
            return false;
     }
     function sendToCDC(){
        //var departure = document.getElementById('departure').value;
        //var departureText = document.getElementById('departure').text;
        var e = document.getElementById("departure");
        var departure = e.options[e.selectedIndex].value;
        var departureText = e.options[e.selectedIndex].text;
         var arrival = document.getElementById('arrival').value;
         var arrivalText = document.getElementById('arrival').textContent;
         var flightHours = document.getElementById('flightHours').value;
         var seatNumber = document.getElementById('seatNumber').value;
         var flightDate = document.getElementById('flightDate').value;
         var sitInSeat = document.getElementById('sitInSeat').value;
         var flightNumber = document.getElementById('flightNumber').value;
            var data = {
             "resourceType" : "Composition",
             "id" : "ReportOfIllTravelerExample",
             "meta" : {
                 "profile" : [
                     "http://hl7.org/fhir/us/reportofilltraveler/StructureDefinition/ReportOfIllTravelerSimple"
                     ]
               },
               "extension" : [
                 {
                 "extension" : [
                     {
                     "url" : "departureAirport",
                     "valueCodeableConcept" : {
                         "coding" : [
                         {
                             "code" : departure,
                             "display" : departureText
                         }
                         ]
                     }
                     },
                     {
                     "url" : "arrivalAirport",
                     "valueCodeableConcept" : {
                         "coding" : [
                         {
                             "code" : arrival,
                             "display" : arrivalText
                         }
                         ]
                     }
                     },
                     {
                     "url" : "flightNumber",
                     "valueString" : flightNumber
                     },
                     {
                     "url" : "seatNumber",
                     "valueString" : seatNumber
                     },
                     {
                     "url" : "flightDuration",
                     "valueInteger" : flightHours
                     },
                     {
                     "url" : "airline",
                     "valueString" : "United"
                     }
                 ],
                 "url" : "http://hl7.org/fhir/us/reportofilltraveler/StructureDefinition/flight-details"
                 },
                 {
                 "url" : "http://hl7.org/fhir/us/reportofilltraveler/StructureDefinition/disease-name",
                 "valueCodeableConcept" : {
                     "coding" : [
                     {
                         "code" : "TB",
                         "display" : "Tuberculosis"
                     }
                     ]
                 }
                 }
             ],
             "status" : "final",
             "type" : {
                 "coding" : [
                 {
                     "code" : "55751-2",
                     "display" : "Public health Case report"
                 }
                 ]
             },
             "subject" : {
             "reference" : "Patient/travelerExample"
             },
             "date" : "2023-12-03T19:43:30.000Z",
             "author" : [
                 {
                 "reference" : "Organization/StateExample"
                 }
             ],
             "title" : "Report of Ill Traveler"

         };
            fetch("https://api.logicahealth.org/AirCI/open/Composition", {
                method: "POST",
                body: JSON.stringify(data, null, 2),
                headers: {
                    "Content-type": "application/json; charset=UTF-8"
                }
            })
            .then((response) => response.json())
            .then((json) => console.log(json))
            //document.getElementById('Reportoutput').innerHTML = response.body;
          //  document.getElementById('jsonOutput').innerHTML = json;

           // document.getElementById('travelerCreated').innerHTML = json;

        }
 </script>
</head>
<body>
<form onsubmit="return outputTravelerJson()" id="jsonForm">
<ul class="form-style-1">
    <li>
        <label>Report of Ill Traveler</label>
        </li>
        <li>
            <label label id="nextStep">Travel and Disease Information</label>
        </li>
    <li>
        <label>Date of Transfer: </label>
        <input type="date" id="transferDate" name="Date of Transfer" class="field-long" />
         <br>  
    </li>
    <li>
        <label>Quarantine Station Traveler was transfered to</label>
        <select name="qstation" id="qstation" class="field-select">
            <option value="Anchorage">Anchorage</option>
            <option value="Atlanta">Atlanta</option>
            <option value="Boston">Boston</option>
            <option value="Chicago">Chicago</option>
            <option value="Dallas">Dallas</option>
            <option value="Detroit">Detroit</option>
            <option value="ElPaso">El Paso</option>
            <option value="Honolulu">Honolulu</option>
            <option value="Houston">Houston</option>
            <option value="LosAngeles">Los Angeles</option>
            <option value="Miami">Miami</option>
            <option value="Minneapolis">Minneapolis</option>
            <option value="NewYork">New York</option>
            <option value="Newark">Newark</option>
            <option value="Philadelphia">Philadelphia</option>
            <option value="SanDiego">San Diego</option>
            <option value="SanFrancisco">San Francisco</option>
            <option value="SanJuan">San Juan</option>
            <option value="Seattle">Seattle</option>
            <option value="Washington">Washington, DC</option>
        </select>
    </li>
    <section>
        <h2>First Flight Info</h2>
        Departure Airport: <br>
        <select name="departure" id="departure">
            <option value="ABR"> Aberdeen, SD</option>
            <option value="ALB"> Albany, NY</option>
            <option value="LAX"> Los Angeles, CA</option>
            <option value="MIA"> Miami, FL</option>
            <option value="ATL"> Atlanta, GA</option>
            <option value="ORD"> Chicago, IL</option>
            <option value="DFW"> Dallas/Fort Worth, TX</option>
            <option value="DEN"> Denver, CO</option>
            <option value="JFK"> New York, NY</option>
            <option value="SFO"> San Francisco, CA</option>
            <option value="SEA"> Seattle, WA</option>
            <option value="LAS"> Las Vegas, NV</option>
            <option value="PHX"> Phoenix, AZ</option>
            <option value="MSP"> Minneapolis, MN</option>
            <option value="DTW"> Detroit, MI</option>
            <option value="PHL"> Philadelphia, PA</option>
            <option value="BOS"> Boston, MA</option>
            <option value="LGA"> New York, NY</option>
            <option value="EWR"> Newark, NJ</option>
            <option value="CLT"> Charlotte, NC</option>
            <option value="IAH"> Houston, TX</option>
            <option value="DCA"> Washington, DC</option>
            <option value="FLL"> Fort Lauderdale, FL</option>
            <option value="MDW"> Chicago, IL</option>
            <option value="SAN"> San Diego, CA</option>
            <option value="TPA"> Tampa, FL</option>
            <option value="HNL"> Honolulu, HI</option>
            <option value="PDX"> Portland, OR</option>
            <option value="STL"> St. Louis, MO</option>
            <option value="MCO"> Orlando, FL</option>
            <option value="BWI"> Baltimore, MD</option>
            <option value="SLC"> Salt Lake City, UT</option>
            <option value="IAD"> Washington, DC</option>
            <option value="AUS"> Austin, TX</option>
            <option value="SJC"> San Jose, CA</option>
            <option value="DAL"> Dallas, TX</option>
            <option value="HOU"> Houston, TX</option>
            <option value="RDU"> Raleigh/Durham, NC</option>
            <option value="BNA"> Nashville, TN</option>
            <option value="MSY"> New Orleans, LA</option>
            <option value="SMF"> Sacramento, CA</option>
            <option value="IND"> Indianapolis, IN</option>
            <option value="MKE"> Milwaukee, WI</option>
            <option value="JAX"> Jacksonville, FL</option>
            <option value="SAT"> San Antonio, TX</option>
            <option value="PIT"> Pittsburgh, PA</option>
            <option value="SNA"> Santa Ana, CA</option>
            <option value="RSW"> Fort Myers, FL</option>
            <option value="CLE"> Cleveland, OH</option>
            <option value="CMH"> Columbus, OH</option>
            <option value="OGG"> Kahului, HI</option>
            <option value="PBI"> West Palm Beach, FL</option>
        </select><br>
        Arrival Airport: <br>
        <select name="arrival" id="arrival">
            <option value="ABR"> Aberdeen, SD</option>
            <option value="ALB"> Albany, NY</option>
            <option value="LAX"> Los Angeles, CA</option>
            <option value="MIA"> Miami, FL</option>
            <option value="ATL"> Atlanta, GA</option>
            <option value="ORD"> Chicago, IL</option>
            <option value="DFW"> Dallas/Fort Worth, TX</option>
            <option value="DEN"> Denver, CO</option>
            <option value="JFK"> New York, NY</option>
            <option value="SFO"> San Francisco, CA</option>
            <option value="SEA"> Seattle, WA</option>
            <option value="LAS"> Las Vegas, NV</option>
            <option value="PHX"> Phoenix, AZ</option>
            <option value="MSP"> Minneapolis, MN</option>
            <option value="DTW"> Detroit, MI</option>
            <option value="PHL"> Philadelphia, PA</option>
            <option value="BOS"> Boston, MA</option>
            <option value="LGA"> New York, NY</option>
            <option value="EWR"> Newark, NJ</option>
            <option value="CLT"> Charlotte, NC</option>
            <option value="IAH"> Houston, TX</option>
            <option value="DCA"> Washington, DC</option>
            <option value="FLL"> Fort Lauderdale, FL</option>
            <option value="MDW"> Chicago, IL</option>
            <option value="SAN"> San Diego, CA</option>
            <option value="TPA"> Tampa, FL</option>
            <option value="HNL"> Honolulu, HI</option>
            <option value="PDX"> Portland, OR</option>
            <option value="STL"> St. Louis, MO</option>
            <option value="MCO"> Orlando, FL</option>
            <option value="BWI"> Baltimore, MD</option>
            <option value="SLC"> Salt Lake City, UT</option>
            <option value="IAD"> Washington, DC</option>
            <option value="AUS"> Austin, TX</option>
            <option value="SJC"> San Jose, CA</option>
            <option value="DAL"> Dallas, TX</option>
            <option value="HOU"> Houston, TX</option>
            <option value="RDU"> Raleigh/Durham, NC</option>
            <option value="BNA"> Nashville, TN</option>
            <option value="MSY"> New Orleans, LA</option>
            <option value="SMF"> Sacramento, CA</option>
            <option value="IND"> Indianapolis, IN</option>
            <option value="MKE"> Milwaukee, WI</option>
            <option value="JAX"> Jacksonville, FL</option>
            <option value="SAT"> San Antonio, TX</option>
            <option value="PIT"> Pittsburgh, PA</option>
            <option value="SNA"> Santa Ana, CA</option>
            <option value="RSW"> Fort Myers, FL</option>
            <option value="CLE"> Cleveland, OH</option>
            <option value="CMH"> Columbus, OH</option>
            <option value="OGG"> Kahului, HI</option>
            <option value="PBI"> West Palm Beach, FL</option>
        </select><br>
        Hours in Air: <br> <input type="text" id="flightHours"><br>
        Seat #: <br> <input type="text" id="seatNumber"><br>
        Flight #: <br> <input type="text" id="flightNumber"><br>
        Did they sit in their assigned seat?: <br>
        <select name="sitInSeat" id="sitInSeat">
            <option value="Y">Yes</option>
            <option value="N">No</option>
        </select><br>
        Date of Flight: <br> <input type="date" id="flightDate" name="Date of Flight"  /><br>
                      
    </section>
    <li>
        <label>Notes </label>
        <textarea name="notes" id="notes" class="field-long field-textarea"></textarea>
    </li>
    <li>
        <input type="submit" value="Submit" />
    </li>
</ul>
</form>
<p id="result">     </p> 
<li><label id="Reportoutput"></label></li>
<li><label id="jsonOutput"></label></li>
<pre id="Traveleroutput"></pre>
    
        
    <p id="result">     </p> 
    <pre id="travelerCreated"></pre>
</body>
</html>